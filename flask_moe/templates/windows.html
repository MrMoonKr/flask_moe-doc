{% extends 'base.html' %}

{% block css_block %}
{% endblock %}

{% block content_block %}
    <h2>윈도우 기반의 파이썬 개발환경</h2>
    <p>웹 프로그램은 다양한 플랫폼에서 동작시킬 수 있습니다. 책에서는 리눅스/OSX 환경에서의 설정만 다뤘지만 여기에서는 윈도우 환경에서의 웹 서버 프로그램을
    설치하고 파이썬 웹 프로그램을 윈도우에서 구동시키는 것을 설명합니다.</p>

    <h3>목차</h3>
    <ol>
        <li><a href="#apache_install"><h4>아파치 웹 서버 설치</h4></a></li>
        <li><a href="#apache_mod_wsgi"><h4>아파치 웹 서버와 mod_wsgi 연동</h4></a></li>
        <li><a href="#nginx_install"><h4>NGINX 웹 서버 설치</h4></a></li>
        <li><a href="#nginx_uwsgi"><h4>NGINX 웹 서버와 twisted 연동</h4></a></li>
    </ol>

    <hr>
    <a name="apache_install" href="#"><h4>1. 아파치 웹 서버 설치</h4></a>
    <p><span>아파치 웹 서버는 리눅스/유닉스를 비롯한 다양한 운영체제에서 동작하는 크로스 플랫폼 웹 서버 프로그램입니다. 전세계 웹 서버 점유율이 항상 60%에 이를 정도로 인기가 있기도 합니다.</span></p>
    <p><span></span></p>
    <p><span>일반적으로 리눅스/유닉스 플랫폼에 설치하여 운영하는 것이 일반적이지만 개발 목적으로 사용하거나 특수한 경우에 한해 윈도우에 아파치 웹 서버를 설치하기도 합니다.</span></p>
    <p><span></span></p>
    <p><span>2016년 4월 기준 아파치 웹 서버는 소스 버전과 2.2.25 버전까지만 한해 윈도우용 설치 파일을 제공합니다. 여러분이 마이크로소프트 비주얼 스튜디오 2010 버전을 가지고 있다면 직접 컴파일해서 사용할 수 있지만 여기서는 미리 컴파일되어 있는 버전을 다운로드 받아 사용합니다.</span></p>
    <p><span></span></p>
    <p><span>미리 컴파일되어 있는 아파치 웹 서버는 다음의 사이트에서 다운로드 받을 수 있습니다.</span></p>
    <p><span></span></p>
    <p><span>ApacheHaus(</span><span><a href="https://www.apachehaus.com">https://www.apachehaus.com/</a></span><span>)</span></p>
    <p><span>Apache Lounge(</span><span><a href="http://www.apachelounge.com/">www.apachelounge.com/</a></span><span>)</span></p>
    <p><span>BitNami WAMP Stack(</span><span><a href="https://bitnami.com/stack/wamp">https://bitnami.com/stack/wamp</a></span><span>)</span></p>
    <p><span>WampServer(</span><span><a href="http://www.wampserver.com/en/">www.wampserver.com/en/</a></span><span>)</span></p>
    <p><span>XAMPP(</span><span><a href="https://www.apachefriends.org/">https://www.apachefriends.org/</a></span><span>)</span></p>
    <p><span></span></p>
    <p><span>아파치 웹 서버는 mod_wsgi 라이브러리와의 연동을 위해 특정 기준에 충족하는 버전을 다운로드 받아야 합니다. 이를 위해 Apache Lounge에 접속합니다.</span></p>
    <p><span></span></p>
    <p><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 192.00px;"><img alt="" src="/static/images/image00.png" style="width: 601.70px; height: 192.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p>
    <p><span>&lt;그림 1&gt; Apache Lounge 사이트 홈 화면</span></p>
    <p><span></span></p>
    <p><span>Apache Lounge 사이트에 접속하셨으면 좌측의 Downloads 링크를 클릭합니다. 그럼 &lt;그림 2&gt;와 같은 화면이 나올 것입니다.</span></p>
    <p><span></span></p>
    <p><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 180.00px;"><img alt="" src="/static/images/image02.png" style="width: 601.70px; height: 180.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p>
    <p><span>&lt;그림 2&gt; Apache Lounge 다운로드 화면</span></p>
    <p><span>&lt;그림 2&gt;의 화면이 나오면 VC10 런타임을 사용한 버전을 다운로드 하기 위해 좌측의 VC10 링크를 클릭합니다. 잠시 뒤 &lt;그림 3&gt;의 화면(화면 일부분)을 볼 수 있을 것입니다.</span></p>
    <p><span></span></p>
    <p><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 194.67px;"><img alt="" src="/static/images/image01.png" style="width: 601.70px; height: 194.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p>
    <p><span>&lt;그림 3&gt; 아파치 웹 서버 프로그램 다운로드 하기</span></p>
    <p><span></span></p>
    <p><span>그림 3의 화면이 나오면 여러분이 몇 비트 윈도우를 사용하고 있는지에 따라 Win64 또는 Win32 버전을 &nbsp;다운로드 하면 됩니다. 필자는 64 비트 버전을 사용함에 따라 httpd-2.4.20-win64.zip 파일을 다운로드 했습니다. 몇 비트 윈도우를 사용하고 있는지 알 수 없다면 “윈도우 제어판 &gt; 시스템”을 통해 윈도우 버전을 확인할 수 있습니다.</span></p>
    <p><span></span></p>
    <p><span>httpd-2.4.20-win64.zip 파일을 다운로드 받았으면 임의의 폴더에 파일의 압축을 해제합니다.</span></p>
    <p><span></span></p>
    <p><span>파일의 압축을 해제하고 나면 Apache24 폴더가 보일 것입니다. 필자는 이 폴더를 C:\ 에 옮기는 것을 권장합니다. 이렇게 하면 이후의 설정 또는 관리 편의성이 좋습니다.</span></p>
    <p><span></span></p>
    <p><span>미리 컴파일되어 배포되는 아파치 웹 서버는 설치 파일로 제공되지 않기 때문에 윈도우 서비스로 동작시키거나 시작하는 방법이 조금 불편합니다.</span></p>
    <p><span></span></p>
    <p><span>이제 아파치 웹 서버를 시작/중지하는 방법과 윈도우 서비스로 등록/해제 하는 방법을 살펴보겠습니다.</span></p>
    <p><span></span></p>
    <p><span style="font-weight: bold;">1. 아파치 웹 서버의 시작/중지</span></p>
    <p><span>아파치 웹 서버를 시작/중지하기 위해서 처음 해야할 일은 “명령 프롬프트"를 “윈도우 관리자 권한”으로 실행하는 일입니다.</span></p>
    <p><span></span></p>
    <p><span>“명령 프롬프트"를 관리자 권한으로 실행하려면 윈도우 시작 메뉴에서 “명령 프롬프트"를 찾아 마우스 오른쪽 버튼을 클릭하면 “관리자 권한으로 실행"이라는 팝업 메뉴가 보입니다. 이 메뉴를 클릭하면 윈도우 관리자 권한으로 “명령 프롬프트”가 실행됩니다. 관리자 권한으로 “명령 프롬프트"를 실행하지 않으면 아파치 웹 서버가 정상적으로 실행되지 않을 수 있으므로 주의해야 합니다.</span></p>
    <p><span></span></p>
    <p><span>두번째로 해야할 일은 httpd 명령을 사용해 아파치 웹 서버를 시작하고 정지하는 것입니다.</span></p>
    <p><span></span></p>
    <p><span>아파치 웹 서버 시작하기</span></p>
    <div>
        <code style="display: block;">
        C:\&gt;cd C:\Apache24\bin<br>
        C:\Apache24\bin&gt;httpd -k start
        </code>
    </div>
    <p><span></span></p>
    <p><span>아파치 웹 서버 정지하기</span></p>
    <div>
        <code style="display: block;">
        C:\&gt;cd C:\Apache24\bin<br>
        C:\Apache24\bin&gt;httpd -k stop
        </code>
    </div>
    <p><span></span></p>
    <p><span>아파치 웹 서버를 시작하고 나면 정상적으로 동작하는지 확인하기 위해 웹 브라우저로 http://localhost에 접속합니다.</span></p>
    <p><span></span></p>
    <p><span>아파치 웹 서버가 정상적으로 실행되었으면 It Works! 글자가 보일 것입니다. 대부분의 경우 정상적으로 보이겠지만 혹시 보이지 않는다면 앞의 내용을 실행하는데 잘못된 내용은 없었는지 확인해보시길 바랍니다.</span></p>
    <p><span></span></p>
    <p><span style="font-weight: bold;">2. 윈도우 서비스로의 등록/해제</span></p>
    <p><span>아파치 웹 서버는 윈도우 서비스로 등록해서 사용하는 것도 가능합니다. 윈도우 서비스로의 등록/해제도 httpd 명령으로 쉽게 할 수 있습니다.</span></p>
    <p><span></span></p>
    <p><span>아파치 웹 서버를 윈도우 서비스에 등록하기</span></p>
    <div>
        <code style="display: block;">
        C:\Apache24\bin&gt;httpd -k install
        </code>
    </div>
    <p style="margin-top: 10px;"><span>아파치 웹 서버를 윈도우 서비스에서 해제하기</span></p>
    <div>
        <code style="display: block;">
        C:\Apache24\bin&gt;httpd -k uninstall
        </code>
    </div>
    <p style="margin-top: 30px;"><span style="font-weight: bold;">주의하세요. 아파치 웹 서버는 설정 파일이 잘못 구성되어 있으면 실행되지 않아요.</span></p>
    <p><span>아파치 웹 서버는 설정 파일(httpd.conf)이 잘못 구성되어 있으면 실행되지 않습니다. httpd 명령으로 설정 파일이 잘못 구성되어 있는지 미리 확인할 수 있습니다.</span></p>
    <p><span></span></p>
    <p><span>아파치 웹 서버 설정 파일에 오류가 있는지 검사하기</span></p>
    <div>
        <code style="display: block;">
        C:\Apache24\bin&gt;httpd -t
        </code>
    </div>
    <p><span>이 명령은 설정 파일에 어떤 문제가 있는지 알려줍니다. httpd.conf 파일을 수정했다면 오류 검사를 통해 설정 파일에 있을지도 모르는 문제를 미리 확인해 보는 것이 좋습니다.</span></p>
    <p><span></span></p>
    <p style="margin-top: 30px;"><span style="font-weight: bold;">주의하세요. 아파치 웹 서버가 실행되지 않아요.</span></p>
    <p><span>Apache Lounge에서 다운로드 받은 VC10에서 컴파일된 아파치 웹 서버는 msvcr100.dll 파일이 없으면 실행되지 않습니다. 이 파일은 “Microsoft Visual C++ 2010 재배포 가능 패키지”를 설치하면 됩니다.</span></p>
    <p><span></span></p>
    <p><span>Microsoft Visual C++ 2010 재배포 가능 패키지는 x86용과 x64용으로 나눠서 제공되는데 여러분의 운영체제에 맞게 다운로드 받아 설치할 수 있습니다. 필자는 x64 윈도우를 사용하고 있어 x64 패키지를 다운로드해서 설치했습니다. 아래에 다운로드 링크를 누르면 “Microsoft Visual C++ 2010 재배포 가능 패키지” 다운로드 페이지로 바로 이동할 수 있습니다.</span></p>
    <p><span></span></p>
    <p><span><a href="https://www.microsoft.com/ko-kr/download/details.aspx?id=5555">Microsoft Visual C++ 2010 재배포 가능 패키지(x86) 다운로드</a></span></p>
    <p><span><a href="https://www.microsoft.com/ko-kr/download/details.aspx?id=14632">Microsoft Visual C++ 2010 재배포 가능 패키지(x64) 다운로드</a></span></p>
    <hr>
    <a name="apache_mod_wsgi" href="#"><h4>2. 아파치 웹 서버와 mod_wsgi 연동</h4></a>
    <p><span>파이썬 WSGI 기반의 웹 애플리케이션을 아파치 웹 서버 기반으로 배포 할 때 사용할 수 있는 아파치 모듈입니다. 이 라이브러리는 구글이 개발했으며 아파치 동적 모듈로 인기 있는 라이브러리 중 하나입니다.</span></p>
    <p><span></span></p>
    <p><span>아파치 웹 서버에서 WSGI 기반 웹 애플리케이션은 mod_wsgi 외에도 mod_python이 있지만 mod_python은 2013년 이후 개발이 중단되어 있어 사용을 권장하지 않습니다.</span></p>
    <p><span></span></p>
    <p><span>mod_wsgi &nbsp;홈페이지: <a href="https://modwsgi.readthedocs.io">https://modwsgi.readthedocs.io</a></span></p>
    <p><span></span></p>
    <p><span>mod_wsgi는 소스 버전과 바이너리 버전이 제공되며 가능한 최신 버전의 소스 버전을 설치하는 것을 권장합니다. mod_wsgi는 리눅스/OSX에 한해 pip 명령으로 쉽게 설치할 수 있지만 윈도우를 사용하고 있다면 최신 버전의 컴파일은 Microsoft Visual Studio 2010이 필요하기 때문에 필자는 미리 컴파일되어 있는 mod_wsgi 4.4.12 버전을 받아 설정하겠습니다.</span></p>
    <p><span></span></p>
    <p><span>주의하세요. mod_wsgi를 컴파일 하기 위해서 Microsoft Visual Studio 2010 이상이거나 이하면 안되나요?</span></p>
    <p><span>2016년 5월 기준 </span><span>윈도우용 mod_wsgi 모듈은 VC10(Visual Studio 2010) 에서 컴파일된 아파치 웹 서버 프로그램과 파이썬에서만 동작하고 있습니다. 만약 여러분이 사용하고 있는 아파치 웹 서버의 컴파일 환경이 VC10 이하거나 그 이상을 사용하는 경우는 아파치 웹 서버도 다시 VC10에서 컴파일하고 사용해야 하는 점에 주의하세요.</span></p>
    <p><span></span></p>
    <p><span>mod_wsgi 4.4.12 버전을 빨리 다운로드 받기 위해서 다음 URL에 접속합니다.</span></p>
    <p><span></span></p>
    <p><span><a href="https://github.com/GrahamDumpleton/mod_wsgi/releases?after=4.4.13">https://github.com/GrahamDumpleton/mod_wsgi/releases?after=4.4.13</a></span></p>
    <p><span></span></p>
    <p><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 297.33px;"><img alt="" src="/static/images/image03.png" style="width: 601.70px; height: 297.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p>
    <p><span>&lt;그림 3&gt; mod_wsgi 다운로드 화면</span></p>
    <p><span></span></p>
    <p><span>&lt;그림 3&gt;의 화면이 보이면 mod_wsgi-windows-4.4.12.tar.gz 링크를 클릭해 &nbsp;mod_wsgi 바이너리 파일을 내려받습니다.</span></p>
    <p><span></span></p>
    <p><span>이 파일의 압축을 해제하면 다음 4개의 폴더가 보일것입니다.</span></p>
    <p><span></span></p>
    <ul style="list-style: none;">
        <li>Apache22-win32-VC9</li>
        <li>Apache24-win32-VC9</li>
        <li>Apache24-win32-VC10</li>
        <li>Apache24-win64-VC10</li>
    </ul>
    <p><span></span></p>
    <p><span>필자는 64비트 윈도우 컴퓨터를 사용하고 있어 아파치 웹 서버가 64비트용으로 컴파일되어 있는 버전을 다운로드 받았습니다. 이에 따라 mod_wsgi 모듈을 아파치 웹 서버에 추가하기 위해 Apache24-win64-VC10 폴더에 있는 내용을 사용할 것입니다.</span></p>
    <p><span></span></p>
    <p><span>Apache24-win64-VC10에 있는 modules 폴더를 복사해서 C:\Apache24에 붙여넣습니다. C:\Apache24 폴더 안에 내용을 붙여넣는 일은 윈도우 관리자 권한을 필요로 합니다.</span></p>
    <p><span></span></p>
    <p><span style="font-weight: bold;">0. 아파치 웹 서버와 mod_wsgi 연동에 사용된 프로그램 버전</span></p>
    <p><span></span></p>
    <ul>
        <li><span>Apache 2.4.20 for Windows (VC10 컴파일)</span></li>
        <li><span>Python 3.4 (VC10 컴파일)</span></li>
        <li><span>mod_wsgi 4.4.12 (VC10 컴파일)</span></li>
    </ul>
    <p><span></span></p>
    <p><span style="font-weight: bold;">1. 아파치 웹 서버에 mod_wsgi 모듈 로드하기</span></p>
    <p><span>modules 폴더를 C:\Apache24 안에 복사했으면 wsgi 모듈을 아파치 웹 서버에 인식시켜야 합니다.</span></p>
    <p><span></span></p>
    <p><span>자주쓰는 텍스트 편집기(예, 에디트플러스, Acroedit 등)로 C:\Apache24\conf\httpd.conf 파일을 열고 178라인에 다음과 같은 내용을 추가하고 빈 줄을 추가합니다.</span></p>
    <p><span></span></p>
    <code style="display: block;">LoadModule wsgi_module modules/mod_wsgi-py34-VC10.so</code>
    <p><span></span></p>
    <p><span>파일을 편집했으면 저장하고 빠져나옵니다.</span></p>
    <p><span></span></p>
    <p><span style="font-weight: bold;">2. 아파치 재시작</span></p>
    <p><span>“1. 아파치 웹 서버에 mod_wsgi 모듈 로드하기"를 통해 모듈을 설정 파일에 추가했으면 아파치 웹 서버를 재시작합니다.</span></p>
    <p><span></span></p>
    <div>
        <code style="display: block;">C:\&gt;cd C:\Apache24\bin</code>
        <code style="display: block;">C:\Apache24\bin&gt;httpd -k stop</code>
        <code style="display: block;">C:\Apache24\bin&gt;httpd -k start</code>
    </div>
    <p><span></span></p>
    <p><span style="font-weight: bold;">3. Flask 샘플 프로그램 준비</span></p>
    <p><span>Apache와 mod_wsgi를 연동한 웹 서버에 배포하기 위한 Flask 애플리케이션을 준비합니다. 여기에서는 </span><span><a href="http://flask.pocoo.org">http://flask.pocoo.org</a></span><span>&nbsp;홈 페이지에 있는 애플리케이션을 사용합니다.</span></p>
    <p><span></span></p>
    <div>
        <code style="display: block;">
        from flask import Flask<br><br>

        app = Flask(__name__)<br><br>

        @app.route("/")<br>
        def hello_world():<br>
        &nbsp; &nbsp; return "Hello World!"
        </code>
    </div>
    <p><span>&lt;코드 1&gt; __init__.py</span></p>
    <p><span></span></p>
    <p><span>코드 1을 C:\app\hello_world 폴더를 만들고 hello_world 폴더에 __init__.py로 저장합니다.</span></p>
    <p><span></span></p>
    <p><span style="font-weight: bold;">4. wsgi 파일 준비하기</span></p>
    <p><span>mod_wsgi 모듈을 아파치 웹 서버에 추가했으면 mod_wsgi 모듈이 우리가 준비한 WSGI 애플리케이션을 서비스할 수 있도록 wsgi 파일을 만들어야 합니다. wsgi 파일은 실제론 파이썬 파일이며 확장자만 wsgi로 만듭니다.</span></p>
    <p><span></span></p>
    <p><span>이 파일의 내용은 다음과 같습니다.</span></p>
    <p><span></span></p>
    <div>
        <code style="display: block;">
        import sys<br>
        sys.path.insert(0, r'C:/app)<br><br>

        from hello_world import app as application
        </code>
    </div>
    <p><span>&lt;코드 2&gt; hello_world.wsgi</span></p>
    <p><span></span></p>
    <p><span>이 코드을 C:\app 폴더에 hello_world.wsgi로 저장합니다.</span></p>
    <p><span></span></p>
    <p><span style="font-weight: bold;">5. 아파치 설정 파일 2번째 편집</span></p>
    <p><span>마지막으로 아파치 웹 서버 설정 파일에 우리가 배포하려는 WSGI 프로그램이 있는 디렉터리 설정 및 메인 호스트에 접속했을때 WSGI 프로그램이 응답하게 해야 합니다.</span></p>
    <p><span></span></p>
    <p><span>다음의 코드를 C:\Apache24\conf\httpd.conf 파일에 맨 마지막에 추가합니다.</span></p>
    <p><span></span></p>
    <div>
        <code style="display: block;">
        WSGIScriptAlias / C:\\app\\hello_world.wsgi<br><br>

        &lt;Directory C:\\app&gt;<br>
        &nbsp; WSGIApplicationGroup %{GLOBAL}<br>
        &nbsp; Order deny,allow<br>
        &nbsp; Allow from all<br>
        &nbsp; Require all granted<br>
        &lt;/Directory&gt;
        </code>
    </div>
    <p><span>&lt;코드 3&gt; 아파치 웹 서버 설정 파일에 WSGI 지시자 및 디렉터리 설정을 추가하는 코드</span></p>
    <p><span></span></p>
    <p><span>아파치 웹 서버 설정 파일(httpd.conf)을 편집했으면 관리자 권한으로 실행한 “명령 프롬프트"로 아파치 웹 서버를 재시작 합니다.</span></p>
    <p><span></span></p>
    <code style="display: block;">C:\Apache24\bin&gt;httpd -k restart</code>
    <p><span></span></p>
    <p><span>이제 아파치 웹 서버에 mod_wsgi 연동 후에 WSGI 프로그램을 배포하는 작업을 모두 마쳤습니다. 웹 브라우저 http://localhost에 접근했을때 브라우저 화면에 Hello World!가 보이면 정상적으로 배포가 된것입니다.</span></p>
    <p><span>수고하셨습니다.</span></p>
    <hr>
    <a name="nginx_install" href="#"><h4>3. NGINX 웹 서버 설치</h4></a>
    <p><span>NGINX는 현재 전세계 웹 서버 시장에서 아파치 웹 서버와 함께 가장 많이 쓰이고 있는 웹 서버 프로그램 중 하나이며 테스트 종류에 따라 아파치 웹 서버를 능가한다는 조사 결과도 있습니다.</span></p>
    <p><span></span></p>
    <p><span>NGINX도 아파치 웹 서버의 경우처럼 윈도우에 설치해서 운영하는 것을 권장하지 않습니다. 필자는 제품 운영 환경에선 리눅스 기반에서 NGINX를 동작시키는 것을 권장합니다.</span></p>
    <p><span></span></p>
    <p><span>NGINX를 다운로드 하기 위해 공식 홈페이지에 접속합니다.</span></p>
    <p><span></span></p>
    <p><span><a href="http://www.nginx.org">http://www.nginx.org</a></span></p>
    <p><span></span></p>
    <p><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 340.00px;"><img alt="" src="/static/images/image04.png" style="width: 601.70px; height: 340.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p>
    <p><span>&lt;그림 4&gt; NGINX 홈페이지</span></p>
    <p><span></span></p>
    <p><span>NGINX 다운로드는 우측의 download 링크를 클릭하면 &lt;그림 5&gt;의 화면이 보입니다.</span></p>
    <p><span></span></p>
    <p><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 362.67px;"><img alt="" src="/static/images/image05.png" style="width: 601.70px; height: 362.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p>
    <p><span>&lt;그림 5&gt; NGINX 다운로드 페이지</span></p>
    <p><span></span></p>
    <p><span>NGINX는 2016년 5월 1일 기준 안정화(Stable) 버전으로 1.10.0이 나와 있으며 여기에서도 이 버전을 사용할 것입니다.</span></p>
    <p><span></span></p>
    <p><span>그림 5의 화면에서 nginx/Windows-1.10.0 링크를 클릭하면 NGINX를 다운로드 됩니다.</span></p>
    <p><span></span></p>
    <p><span>그럼 nginx-1.10.0.zip 파일이 다운로드됩니다. 이 파일의 압축을 해제합니다.</span></p>
    <p><span></span></p>
    <p><span>압축파일을 해제하면 nginx-1.10.0 폴더가 나오는데 이 디렉터리의 이름을 nginx로 바꿔서 C:\nginx로 &nbsp;복사해둡니다. NGINX 설치는 이것으로 완료했습니다.</span></p>
    <p><span></span></p>
    <p><span style="font-weight: bold;">1. NGINX 서비스 시작과 종료</span></p>
    <p><span>NGINX 서비스 시작/종료는 다음과 같은 방법으로 합니다.</span></p>
    <p><span></span></p>
    <p><span>NGINX 시작</span></p>
    <code style="display: block;">
    C:\&gt;cd nginx<br>
    C:\nginx&gt;start nginx
    </code>
    <p><span></span></p>
    <p><span>NGINX 종료</span></p>
    <code style="display: block;">
    C:\&gt;cd nginx<br>
    C:\nginx&gt;nginx -s quit
    </code>
    <p><span></span></p>
    <p><span>NGINX는 2개의 종료 옵션을 제공하는데 quit는 가동된 NGINX 서버가 안정적으로 종료하도록 하는 옵션이며 다른 옵션으로 stop이 있습니다. stop은 빠른 종료 옵션으로 stop을 제공하는 것은 일반적으로 권장하지 않습니다.</span></p>
    <p><span></span></p>
    <p><span>NGINX를 시작하고 나면 웹 브라우저로 localhost에 접속합니다.</span></p>
    <p><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 517.00px; height: 203.00px;"><img alt="" src="/static/images/image06.png" style="width: 517.00px; height: 203.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p>
    <p><span>&lt;그림 6&gt; NGINX 서버가 시작한 모습</span></p>
    <p><span></span></p>
    <p><span style="font-weight: bold;">2. NGINX를 윈도우 서비스로 등록하기</span></p>
    <p><span>NGINX는 아파치 웹 서버와 달리 nginx 명령으로 윈도우 서비스에 등록하는 명령어는 따로 제공하고 있지 않습니다. 이에 따라 윈도우 서비스로 NGINX를 등록하려면 다음의 링크를 참조하세요.</span></p>
    <p><span></span></p>
    <p><span><a href="http://goo.gl/6TChIr">http://goo.gl/6TChIr</a></span></p>
    <p><span></span></p>
    <hr>
    <a name="nginx_uwsgi" href="#"><h4>4. NGINX 웹 서버와 twisted 연동</h4></a>
    <p><span>NGINX는 정적인 파일을 서비스하기에는 좋지만 아파치 웹 서버와 다르게 mod_wsgi 같은 모듈을 붙일 수가 없습니다. 이에 따라 Tornado(토네이도)나 uwsgi 같은 컨테이너와 연동하는게 일반적입니다.</span></p>
    <p><span></span></p>
    <p><span>리눅스/OSX 기반에서는 NGINX에 uwsgi를 사용해 웹 응용 프로그램을 배포하도록 연동하는 방법이 널리 알려져 있습니다.</span></p>
    <p><span></span></p>
    <p><span>하지만 윈도우는 2016년 5월 현재 uwsgi가 동작하지 않고 있습니다. 이에 따라 이 문서에서는 파이썬 NGINX와 twisted를 Proxy로 연동하겠습니다.</span></p>
    <p><span></span></p>
    <p><span style="font-weight: bold;">1. twisted 설치하기</span></p>
    <p><span>twisted는 파이썬으로 만들어진 이벤트 기반의 네트워크 엔진입니다. pip 명령으로 쉽게 설치할 수 있습니다.</span></p>
    <p><span></span></p>
    <p><span>twisted에 대한 다른 정보를 추가로 얻으시려면 twisted 홈페이지에 방문하세요. twisted 홈페이지는 </span><span><a href="https://twistedmatrix.com/trac/">https://twistedmatrix.com/trac/</a></span><span>&nbsp;입니다.</span></p>
    <p><span></span></p>
    <code style="display: block">
    C:\&gt;C:\Python34\Scripts\pip install twisted<br>
    Collecting twisted<br>
    &nbsp; Downloading Twisted-16.1.1.tar.bz2 (2.9MB)<br>
    &nbsp; &nbsp; 100% |################################| 2.9MB 145kB/s<br>
    Collecting zope.interface&gt;=4.0.2 (from twisted)<br>
    &nbsp; Downloading zope.interface-4.1.3.tar.gz (141kB)<br>
    &nbsp; &nbsp; 100% |################################| 143kB 2.6MB/s<br>
    Requirement already satisfied (use --upgrade to upgrade): setuptools in c:\python34\lib\site-packages (from zope.interface&gt;=4.0.2-&gt;twisted)<br>
    Installing collected packages: zope.interface, twisted<br>
    &nbsp; Running setup.py install for zope.interface<br>
    &nbsp; Running setup.py install for twisted<br>
    Successfully installed twisted-16.1.1 zope.interface-4.1.3</code>
    <p><span>&lt;셸 1&gt; pip 명령으로 twisted 설치하기</span></p>
    <p><span></span></p>
    <p><span style="font-weight: bold;">2.twisted 구동 파일 만들기</span></p>
    <p><span>twisted로 WSGI 프로그램을 시작하려면 파이썬 파일을 만드는 방법과 twistd 명령을 사용하는 방법이 있습니다. 이 문서에서는 파이썬 파일을 만드는 방법을 사용할 것입니다. 여기에 쓰인 예제는 아파치 웹 서버와 mod_wsgi 연동에 쓰인 구조를 그대로 다시 사용할 것입니다.</span></p>
    <p><span></span></p>
    <p><span>다음과 같은 내용으로 twisted 구동 스크립트를 텍스트 에디터로 작성합니다.</span></p>
    <p><span></span></p>
    <code style="display: block">
    from twisted.web.wsgi import WSGIResource<br>
    from twisted.internet import reactor<br>
    from twisted.web import server<br>
    from hello_world import app as application<br><br>

    resource = WSGIResource(reactor, reactor.getThreadPool(), application)<br>
    site = server.Site(resource)<br>
    reactor.listenTCP(8080, site)<br>
    reactor.run()</code>
    <p><span>&lt;코드 4&gt; twisted 구동 파일 만들기</span></p>
    <p><span></span></p>
    <p><span>코드 4의 내용을 C:\app\twisted_run.tac으로 저장합니다. 이렇게 하는 것으로 twisted 구동 파일을 모두 만들었습니다.</span></p>
    <p><span></span></p>
    <p><span style="font-weight: bold;">3. NGINX에 twisted 연동하기</span></p>
    <p><span>NGINX와 twisted와의 연결은 Proxy 모드로 구성합니다. NGINX 설정 파일(nginx.conf)을 &nbsp;텍스트 에디터로 열어서 44-45 줄을 다음과 같이 변경합니다.</span></p>
    <p><span></span></p>
    <code style="display: block">
    proxy_pass &nbsp; &nbsp; &nbsp; &nbsp; http://127.0.0.1:8080/;<br>
    proxy_redirect &nbsp; &nbsp; off;<br><br>

    proxy_set_header &nbsp; Host &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $host;<br>
    proxy_set_header &nbsp; X-Real-IP &nbsp; &nbsp; &nbsp; &nbsp;$remote_addr;<br>
    proxy_set_header &nbsp; X-Forwarded-For &nbsp;$proxy_add_x_forwarded_for;<br>
    </code>
    <p><span></span></p>
    <p><span>변경된 내용을 저장했으면 NGINX를 재시작 합니다.</span></p>
    <p><span></span></p>
    <p><span>NGINX 재시작</span></p>
    <code style="display: block">C:\nginx&gt;nginx -s reload</code>
    <p><span></span></p>
    <p><span>이것으로 NGINX 설정은 모두 마쳤습니다.</span></p>
    <p><span></span></p>
    <p><span style="font-weight: bold;">4. twisted 시작하기</span></p>
    <p><span>이제 “2.twisted 구동 파일 만들기”에서 만들었던 twisted_run.tac 파일을 명령 프롬프트에서 실행합니다. twisted_run.tac 파일을 실행할때는 관리자 권한이 없어도 됩니다.</span></p>
    <p><span></span></p>
    <code style="display: block">C:\app&gt;C:\Python34\python twisted_run.tac</code>
    <p><span></span></p>
    <p><span>위 명령을 실행했으면 웹 브라우저로 localhost에 접속합니다. 화면에 Hello World!가 보이면 정상적으로 연동이 완료된 것입니다.</span></p>
    <p><span></span></p>
    <p><span style="font-weight: bold;">주의하세요. NGINX를 실행할 때 특별한 권한이 필요한가요?</span></p>
    <p><span>NGNIX도 아파치 웹 서버처럼 “명령 프롬프트"를 관리자 권한으로 실행해야 합니다. 그렇지 않으면 NGINX가 실행되지 않습니다.</span></p>
{% endblock %}
